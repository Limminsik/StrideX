<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gait Physiological Signal Dashboard - StrideX</title>
    <base href="./"> <!-- ✅ file://에서 상대경로 강제 -->
    <link rel="stylesheet" href="css/style.css">
  </head>
<body>
  <div class="container">
    <!-- 상단 바 -->
    <header class="topbar">
        <h1 class="brand">Gait Physiological Signal Dashboard &mdash; StrideX</h1>
    </header>

    <!-- 본문 (3열: 좌측 목록 / 중앙 본문 / 우측 사이드바) -->
    <div class="layout">
      <!-- 좌측: Subject 목록 -->
      <aside class="subjects">
        <div class="sidecard">
          <div class="side-title">Subjects</div>
          
          <!-- 버튼 영역을 여기로 이동 -->
          <div class="side-actions">
            <input type="file" id="fileInput" multiple accept=".json,.jsonl,.ndjson" style="display: none;">
            <button id="btnAdd" class="btn btn-primary wfull">데이터 추가</button>
            <button id="btnReset" class="btn btn-ghost wfull">데이터 초기화</button>
          </div>

          <!-- 기존 Subject 리스트 -->
          <ul id="subjectList" class="subj-list"></ul>
        </div>
      </aside>

      <!-- 중앙: 스크롤 가능한 대시보드 -->
      <main class="dashboard">
        <!-- IMU 섹션 -->
        <div class="card">
          <div class="card-title">IMU</div>
          <div class="glist">
            <!-- 보행 주기 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_imu_gait_cycle"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="imu_gait_cycle_L" class="num">–</span>
                  <span class="tag r">R</span><span id="imu_gait_cycle_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="imu_gait_cycle"></div>
              </div>
            </div>

            <!-- 무릎 굴곡 최대각 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_imu_knee_flexion_max"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="imu_knee_flexion_max_L" class="num">–</span>
                  <span class="tag r">R</span><span id="imu_knee_flexion_max_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="imu_knee_flexion_max"></div>
              </div>
            </div>

            <!-- 무릎 신전 최대각 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_imu_knee_extension_max"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="imu_knee_extension_max_L" class="num">–</span>
                  <span class="tag r">R</span><span id="imu_knee_extension_max_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="imu_knee_extension_max"></div>
              </div>
            </div>

            <!-- 발 들림 높이 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_imu_foot_clearance"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="imu_foot_clearance_L" class="num">–</span>
                  <span class="tag r">R</span><span id="imu_foot_clearance_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="imu_foot_clearance"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Gait Pad 섹션 -->
        <div class="card">
          <div class="card-title">Gait Pad</div>
          <div class="glist">
            <!-- 보폭 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_pad_step_length"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="pad_step_length_L" class="num">–</span>
                  <span class="tag r">R</span><span id="pad_step_length_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="pad_step_length"></div>
              </div>
            </div>

            <!-- 보행 속도 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_pad_velocity"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="pad_velocity_L" class="num">–</span>
                  <span class="tag r">R</span><span id="pad_velocity_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="pad_velocity"></div>
              </div>
            </div>

            <!-- 입각기 비율 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_pad_stance_phase_rate"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="pad_stance_phase_rate_L" class="num">–</span>
                  <span class="tag r">R</span><span id="pad_stance_phase_rate_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="pad_stance_phase_rate"></div>
              </div>
            </div>

            <!-- 유각기 비율 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_pad_swing_phase_rate"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="pad_swing_phase_rate_L" class="num">–</span>
                  <span class="tag r">R</span><span id="pad_swing_phase_rate_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="pad_swing_phase_rate"></div>
              </div>
            </div>

            <!-- 양측 지지시간 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_pad_double_support_time"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="pad_double_support_time_L" class="num">–</span>
                  <span class="tag r">R</span><span id="pad_double_support_time_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="pad_double_support_time"></div>
              </div>
            </div>
          </div>

          <!-- 보행주기(Stride time) – 위치 겹침 방지용으로 별도 카드 아래 배치 -->
          <div class="phase card-sub">
            <div class="phase-title">보행주기 (Stride time)</div>
            <div class="prow">
              <span class="pside l">L (좌)</span>
              <div class="pbar"><div id="pad_phase_L"></div></div>
            </div>
            <div class="prow">
              <span class="pside r">R (우)</span>
              <div class="pbar"><div id="pad_phase_R"></div></div>
            </div>
          </div>

        </div>

        <!-- Smart Insole 섹션 -->
        <div class="card">
          <div class="card-title">Smart Insole</div>
          <!-- Day 칩 -->
          <div class="day-chips" id="dayChips"></div>
          <div class="glist">
            <!-- 보행 속도 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_insole_gait_speed"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="ins_gait_speed_L" class="num">–</span>
                  <span class="tag r">R</span><span id="ins_gait_speed_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="ins_gait_speed"></div>
              </div>
            </div>

            <!-- 좌우 균형 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_insole_balance"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="ins_balance_L" class="num">–</span>
                  <span class="tag r">R</span><span id="ins_balance_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="ins_balance"></div>
              </div>
            </div>

            <!-- 후방 압력 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_insole_foot_pressure_rear"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="ins_foot_pressure_rear_L" class="num">–</span>
                  <span class="tag r">R</span><span id="ins_foot_pressure_rear_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="ins_foot_pressure_rear"></div>
              </div>
            </div>

            <!-- 중앙 압력 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_insole_foot_pressure_mid"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="ins_foot_pressure_mid_L" class="num">–</span>
                  <span class="tag r">R</span><span id="ins_foot_pressure_mid_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="ins_foot_pressure_mid"></div>
              </div>
            </div>

            <!-- 전방 압력 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_insole_foot_pressure_fore"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="ins_foot_pressure_fore_L" class="num">–</span>
                  <span class="tag r">R</span><span id="ins_foot_pressure_fore_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="ins_foot_pressure_fore"></div>
              </div>
            </div>

            <!-- 보행 거리 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_insole_gait_distance"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="ins_gait_distance_L" class="num">–</span>
                  <span class="tag r">R</span><span id="ins_gait_distance_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="ins_gait_distance"></div>
              </div>
            </div>

            <!-- 보폭 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_insole_stride_length"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="ins_stride_length_L" class="num">–</span>
                  <span class="tag r">R</span><span id="ins_stride_length_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="ins_stride_length"></div>
              </div>
            </div>

            <!-- 발각도 -->
            <div class="gauge">
              <div class="gcell left">
                <div class="metric" id="label_insole_foot_angle"></div>
                <div class="vals">
                  <span class="tag l">L</span><span id="ins_foot_angle_L" class="num">–</span>
                  <span class="tag r">R</span><span id="ins_foot_angle_R" class="num">–</span>
                </div>
              </div>
              <div class="gcell right">
                <div class="bar" id="ins_foot_angle"></div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- 우측 사이드바(메타/라벨)로 이동 -->
      <aside class="rightbar">
        <div class="sidecard">
          <div class="side-title">Meta</div>
          <table class="kv"><tbody id="meta_tbody"></tbody></table>
        </div>
        <div class="sidecard">
          <div class="side-title">Labels</div>
          <table class="kv"><tbody id="labels_tbody"></tbody></table>
        </div>
      </aside>
    </div>

    <!-- 하단 푸터 -->
    <footer class="footer">
      <p>GCU License Copyright (c) 2025 Limminsik</p>
    </footer>

    <!-- 에러 메시지 -->
    <div id="errorBox" class="error-box" style="display:none;"></div>
  </div>

    <script src="js/app.js"></script>
</body>
</html>